<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»„ä»¶åŒ–æ€æƒ³</title>
    <style>
        #app {
            width: 100%;
            height: 100px;
            background: #ccc;
        }
        #banner {
            width:  100%;
            height: 100px;
            margin-top: 100px;
            background: #ddd;
        }
    </style>
</head>
<body>
    <!-- 
        ç»„ä»¶ï¼š 
            1. å°†ä¸€ä¸ªæ¨¡ç‰ˆå°è£…æˆæ¨¡å—ï¼Œ åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ã€‚  =>  å»ºç«‹ä¸€æ¬¡ï¼Œ å¤šæ¬¡ä½¿ç”¨
            2. ä¾¿äºç»´æŠ¤, å¯¹äºåæœŸçš„ä¿®æ”¹è¾ƒå‹å¥½

        1. å…¨å±€ç»„ä»¶ï¼š 
            1. åˆ›å»ºæ¨¡ç‰ˆ
                1. åœ¨Vue å®ä¾‹ä¹‹é—´ ä½¿ç”¨ Vue.extend(æ¨¡ç‰ˆ)
                    1. extend() å€¼ å¯ä»¥ä½¿ç”¨ `template: htmlå…ƒç´ `  åœ¨extend å†…åˆ›å»ºæ¨¡ç‰ˆ
                    2. extend() å€¼ å¯ä»¥ä½¿ç”¨ ``template: htmlID    åœ¨HTMLä¸­åˆ›å»ºæ¨¡ç‰ˆï¼Œ ä½¿ç”¨idå€¼ç»‘å®š
                        1. HTMLä¸­ä½¿ç”¨ <template  id="tel">...å…ƒç´ å†…å®¹</template> 
                        2. extend(`template: "#tel"`)
                        
                        1. HTML ä¸­ä½¿ç”¨<script type="text/x-template">
            2. æ³¨å†Œç»„ä»¶
                1. Vue.component('HTMLä¸­ä½¿ç”¨çš„æ ‡ç­¾å', æ³¨å†Œæ—¶èµ‹å€¼çš„å¸¸é‡)
            3. ä½¿ç”¨ç»„ä»¶  æŒ‚è½½åˆ° vue å®ä¾‹ä¸Š
                1. å› æ³¨å†Œçš„æ˜¯å…¨å±€ç»„ä»¶ï¼Œ åˆ™å¯åœ¨å„ä¸ªå®ä¾‹ä¸­ ä½¿ç”¨ æ‰€æ³¨å†Œçš„æ ‡ç­¾åè°ƒç”¨ 
                2. è‹¥åœ¨Vueå®ä¾‹å¤–ä½¿ç”¨ï¼Œ åˆ™æ˜¯ä¸ªæ— æ•ˆçš„æ ‡ç­¾

            4. ç»„ä»¶æ³¨å†Œçš„è¯­æ³•ç³–è¯­æ³•ï¼š 
                1. ä¸ä½¿ç”¨ Vue.extend() æ–¹æ³•ï¼Œ ç›´æ¥å°† æ¨¡ç‰ˆæ”¾ç½® componentså±æ€§å†…ï¼Œ 
                    components: {
                        template: `<div>...</div>`
                    }

        2. å±€éƒ¨ç»„ä»¶ï¼š 
            1. åˆ›å»ºæ¨¡ç‰ˆ
                1. æ¨¡ç‰ˆçš„åˆ›å»ºæ–¹æ³• ä¸ å…¨å±€ç»„ä»¶ä¸€æ ·
                2. åˆ›å»ºä¸€ä¸ª .vue æ–‡ä»¶ï¼Œ å¹¶å°†æ¥å£å¯¼å‡º  
                     1.  export {ç»„ä»¶å}  => è°ƒç”¨æ—¶å¿…é¡»ä½¿ç”¨è¿™ä¸ªç»„ä»¶å                         
                     2.  export default {ç»„ä»¶å}  => è°ƒç”¨æ—¶å¯ä½¿ç”¨è‡ªä¸»åˆ›å»ºçš„ç»„ä»¶å
            2. æ³¨å†Œç»„ä»¶
                1. æ–¹æ³•ä¸€ï¼š æ³¨å†Œçš„æ–¹å¼å’Œå…¨å±€ç»„ä»¶ä¸€è‡´
                2ã€‚æ–¹æ³•äºŒï¼š 
                    1. è°ƒç”¨å¯¼å‡ºçš„æ¥å£ ä½¿ç”¨ import ç»„ä»¶å from æ–‡ä»¶è·¯å¾„  (è‹¥æ˜¯åœ¨æŸä¸ªå­ç»„ä»¶ä¸­è°ƒç”¨ï¼Œ åˆ™éœ€è¦åœ¨è¯¥ç»„ä»¶çš„script æ ‡ç­¾å†… å¼•ç”¨æ¥å£)
                    2. åœ¨Vue å®ä¾‹ä¸­ ä½¿ç”¨ components å±æ€§ æ·»åŠ 
            3. ä½¿ç”¨ç»„ä»¶ (åªå…è®¸åœ¨æ³¨å†Œçš„Vueå®ä¾‹ä¸­ä½¿ç”¨)


        3. çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶
            1. çˆ¶ç»„ä»¶ä¸­æ’å…¥å­ç»„ä»¶: 
                 1. åœ¨çˆ¶ç»„ä»¶çš„ æ¨¡ç‰ˆå†…ä½¿ç”¨ å­ç»„ä»¶çš„å…ƒç´ å
                 2. å¹¶åœ¨çˆ¶ç»„ä»¶çš„conponents å±æ€§ä¸­æ³¨å†Œå­ç»„ä»¶
                 3. å­ç»„ä»¶çš„åˆ›å»ºè¦åœ¨çˆ¶ç»„ä»¶ä¹‹å‰ï¼Œ javascript æ˜¯å¾ªè§„è¹ˆçŸ©ï¼Œ ç”±ä¸Šè‡³ä¸‹è¿è¡Œï¼Œ 
                    å½“å­ç»„ä»¶åœ¨çˆ¶ç»„ä»¶ä¹‹ååˆ›å»ºï¼Œçˆ¶ç»„ä»¶æ³¨å†Œçš„ç»„ä»¶å°†æ— æ³•è·å–åˆ°å­ç»„ä»¶çš„ä¿¡æ¯ï¼Œå‘ç”Ÿé”™è¯¯

        
        4. ç»„ä»¶å±æ€§: 
            1. data  =>  ç»„ä»¶ä¸­çš„dataå±æ€§å¿…é¡»æ˜¯ä¸ªå‡½æ•°ï¼Œ å‡½æ•°çš„å€¼æ˜¯ç‹¬ç«‹çš„  data(){}
            2. props:  çˆ¶ä¼ å­     (properties å±æ€§)
                1. çˆ¶ç»„ä»¶ å†… åˆ›å»ºæ•°æ® =>  åœ¨data:{move:['æµ·ç‹','æµ·è´¼ç‹ ',' ç”µå½±']} ä¸­åˆ›å»ºæ•°æ®
                2. å­ç»„ä»¶åˆ›å»ºprops å±æ€§ï¼Œè®¾ç½®è¦ä½¿ç”¨çš„å€¼ï¼Œ åœ¨çˆ¶ç»„ä»¶æ¨¡ç‰ˆä¸­ ä¼ å…¥å€¼ç»™å­ç»„ä»¶
                    1. ä½¿ç”¨æ•°ç»„ï¼š 
                        1. å­ç»„ä»¶å±æ€§ props: ['cmove', 'cmessage']  => åˆ›å»ºè¦è·å–æ•°æ®çš„åç§°
                        2. åœ¨çˆ¶ç»„ä»¶çš„æ¨¡ç‰ˆä¸­ï¼ŒåŠ¨æ€ä¼ é€’æ•°æ®
                            1. <cpn :cmove="move" :cmessage="message"></cpn>  (cpn æ˜¯å­ç»„ä»¶çš„å…ƒç´ å)
                            2. åœ¨å­ç»„ä»¶çš„æ¨¡ç‰ˆå†…å°±æ˜¯ä½¿ç”¨æ•°æ®
                                1. <template> <p>{{cmessage}} {{cmove}}</p></template>
                    2. ä½¿ç”¨å¯¹è±¡ï¼š 
                        1. å­ç»„ä»¶å±æ€§ props: {
                                                cmessage: {type: String, default: aaa},
                                                cmove: {type: Array, required: true}  
                                                                    => required å¿…ä¼ å±æ€§ï¼Œå¦åˆ™æŠ¥é”™
                                                ** å½“è·å–ä¼ é€’å€¼çš„ç±»å‹ä¸ºå¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œé»˜è®¤å€¼å¿…é¡»æ˜¯ä¸ªå‡½æ•°ï¼Œ å¦åˆ™ä¼šæŠ¥é”™
                                                **  default (){
                                                        return []
                                                    }
                                              }
          
                        2. åœ¨çˆ¶ç»„ä»¶çš„æ¨¡ç‰ˆä¸­ï¼ŒåŠ¨æ€ä¼ é€’æ•°æ®
                            1. <cpn :cmove="move" :cmessage="message"></cpn>  (cpn æ˜¯å­ç»„ä»¶çš„å…ƒç´ å)
                            2. åœ¨å­ç»„ä»¶çš„æ¨¡ç‰ˆå†…å°±æ˜¯ä½¿ç”¨æ•°æ®
                                1. <template> <p>{{cmessage}} {{cmove}}</p></template>

                        3. å½“props ä½¿ç”¨é©¼å³°æ ‡è¯†æ—¶ï¼Œ props: ['strStr']
                           åœ¨æ¨¡ç‰ˆä¸­çš„ä½¿ç”¨å¿…é¡»å°† é©¼å³°å½¢å¼ä»¥ '-' æ‹¼æ¥çš„æ–¹å¼è¾“å‡º => html è§£ædomæ— æ³•è¯†åˆ«é©¼å³°
                            å¦‚ï¼š  <cpn :cstr-str="str">  è€Œä½¿ç”¨musè¯­æ³•åˆ™æ— éœ€è½¬æ¢ <p>{{strStr}}</p> 
            3. $emit()  å­ä¼ çˆ¶
                1. å­ç»„ä»¶åˆ›å»ºæ•°æ® data(){ books: [....]}
                2. å­ç»„ä»¶æ¨¡ç‰ˆåˆ›å»ºæŒ‰é’® , <button @click="btnClick(item)" v-for="item in books">{{item}}
                3. å­ç»„ä»¶methodså±æ€§åˆ›å»ºæ–¹æ³• å‘å°„æ•°æ®ç»™çˆ¶ç»„ä»¶
                    1. methods: { btnClick(item){this.$emit('childbtn', item)}}
                    2. â†‘ 'childbtn' æ˜¯è‡ªå®šä¹‰æ–¹æ³•åï¼Œ  item æ˜¯æ•°æ®æœ¬èº«event
                4. çˆ¶ç»„ä»¶æ¨¡ç‰ˆ
                    1. çˆ¶ç»„ä»¶methods å±æ€§åˆ›å»ºbtnClickçš„æ–¹æ³•
                    2. åœ¨å­ç»„ä»¶ æ ‡ç­¾<cpn @childbtn="btnClick">   ğŸ‘ˆ @childbtn æ˜¯å­ç»„ä»¶å‘å°„æ¥çš„æ–¹æ³•

     -->

    <div id='app'>
        <cpn :cmove="move" :cmessage="message" @childbtn="btnClick"></cpn>
    </div>
    <div id='banner'>
        <cpn/>
    </div>
    <script src='../../vue.js'></script>
    <script>
    
    //åˆ›å»ºå­ç»„ä»¶ï¼Œ å¹¶åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨
    const cpn_child = Vue.extend({
        template: '<div>æˆ‘æ˜¯å­ç»„ä»¶</div>',
        // methods: {
        //     btnClick(item){
        //         // æŒ‰é’®ç‚¹å‡»ï¼Œ å­ç»„ä»¶å‘å°„ä¸€ä¸ªè‡ªå®šä¹‰åä¸º 'childBtn'çš„æ–¹æ³•ï¼Œ å¹¶å°†itemä¼ é€å›å»ç»™çˆ¶ç»„ä»¶
        //         this.$emit('childbtn', item);
        //     }
        // }
 
    })
    // çˆ¶ç»„ä»¶ 
    const cpm = Vue.extend({
        template: `
            <div> 
                <p>æ’å…¥æ¨¡ç‰ˆ</p>
                <p>{{cmove}}</p>
                <p>{{cmessage}}</p>
                <div>
                    <button @click="btnClick(item)" v-for="item in books">{{item.name}}</button>
                </div>
                <cpn_child/>    
            </div>
        `,
        components: {
            cpn_child
        },
        data(){
            return {
                books: [
                    {
                        id:1,
                        name: 'æŒ‰é’®1'
                    }, {
                        id:2,
                        name: 'æŒ‰é’®2'
                    },
                    {
                        id:3,
                        name: 'æŒ‰é’®3'
                    },
                    {
                        id:4,
                        name: 'æŒ‰é’®4'
                    }
                ]
            }
        },
        // å­ç»„ä»¶ï¼Œ ä½¿ç”¨props åˆ›å»ºè·å–çˆ¶ç»„ä»¶æ•°æ®çš„åç§°
        // props: ['cmove', 'cmessage']
        props: {
            cmove: {
                type: Array,
                default() {
                    return []   // å½“å±æ€§ç±»å‹ä¸ºæ•°ç»„æˆ–å¯¹è±¡æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å·¥å‚å‡½æ•°ï¼Œ å¦åˆ™ä¼šæŠ¥é”™
                }
            },
            cmessage: {
                type: String,
                default: 'aaa',
                // required: true   // å¿…é¡»ä¼ å€¼ï¼Œ å¦åˆ™æŠ¥é”™
            }
        },
        methods: {
            btnClick(item){
                // æŒ‰é’®ç‚¹å‡»ï¼Œ å­ç»„ä»¶å‘å°„ä¸€ä¸ªè‡ªå®šä¹‰åä¸º 'childBtn'çš„æ–¹æ³•ï¼Œ å¹¶å°†itemä¼ é€å›å»ç»™çˆ¶ç»„ä»¶
                this.$emit('childbtn', item);
            }
        }
        
        
    })
    
    // å…¨å±€ç»„ä»¶ cpn
    Vue.component('cpn', cpm)
    // åˆ›å»º Vue å®ä¾‹ app
    const app = new Vue ({
       el: '#app',
       data : {
           message: 'hah' ,
           move: ['æµ·ç‹','æµ·è´¼ç‹ ',' ç”µå½±']
       },
       methods: {
           btnClick(item){
               console.log(item)
           }
       }
    });
    // åˆ›å»ºå®ä¾‹  banner 
    const banner = new Vue({
        el: '#banner'
    })
    </script>
</body>
</html>